@startuml

' PARAMETERS
hide circle
skinparam linetype polyline
skinparam linetype ortho
skinparam classAttributeIconSize 0
skinparam groupInheritance 3

class Administrateur 

enum T_adhésion << enum >> {
    OR
    ARGENT
    BRONZE
}

package Utilisateurs {


Class Utilisateur {
    nom : string {not null}
    prenom : string {not null}
    vnom : bool {not null}
    vprenom : bool {not null}
    vphoto : bool {not null}
    date_inscription: date {not null}
    date_derniere_connexion : date {not null}
    adresse : string,
    email : string,
    phone : string,
    website : string,
}
Class Adhérent {

}

Class Adhésion {
    date_exp : date {not null}
    montant : float {not null}
    type : T_adhésion {not null}
}

Class Donateur {
    nom : string
    prenom : string
}

Class Don {
    date : date {not null}
    montant : float {not null}
}
}
' PACKAGE ADMINISTRATEUR 

package Groupes {
Class Fichier {
    chemin : string
    titre : string
    date_telechargement : date
}

Class Groupe {
    titre : string
    description : string
}

Class URL {
    url : string
    titre : string
}

Class Evt {
    titre : string
    date : string
}

note right of Evt 
La date s'inspire du format
ISO 8601 comme dans les 
spécifications du format vCal.
endnote
}
' PACKAGE GROUPE

package Archives {
    class archive_adhésion {
        date_exp : date
        montant : float
        type : T_adhésion
    }
    class archive_adhérent
    class archive_utilisateur {
        nom : string
        prenom : string
        vnom : bool
        vprenom : bool
        vphoto : bool
        date_inscription: date
        date_derniere_connexion : date
    }
    class archive_donateur {
        nom : string
        prenom : string
    }
    class archive_don {
        date : date
        montant : float
    }
}

' LIENS

Fichier "0...1" -- "0..1" Utilisateur : a une photo
Utilisateur <|-- Administrateur

' Groupe
Fichier "*" - "1" Groupe : a partagé un fichier\n(photos ou autres)
URL "*" -- "1" Groupe  : partagé par
Groupe "1" - "*" Evt : partagé par
Utilisateur "1...*" -- "*" Groupe : appartient à

' Utilisateur
Adhérent -|> Utilisateur
Adhésion "1...*" - "1" Adhérent : payé
Utilisateur "0...1" - "0...1" Donateur : est un
Donateur "1" - "1...*" Don : versé

' Archive
Utilisateurs ..> Archives : archivé dans
archive_adhérent -|> archive_utilisateur
archive_adhésion "1...*" - "1" archive_adhérent : payé
archive_utilisateur "0...1" - "0...1" archive_donateur : est un
archive_donateur "1" - "1...*" archive_don : versé


@enduml